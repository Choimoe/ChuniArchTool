<div class="tool-card">
  <div class="tool-card-content">
    <h1 class="text-3xl font-bold text-white mb-6">修改单曲成绩</h1>
    <p class="text-gray-400 mb-2">
      上传你的 RinNet JSON
      档案，选择要修改的歌曲和成绩记录。（版本号：v1.0.3）
    </p>
    <p class="text-gray-400 mb-6">
      <span class="text-yellow-400">注意：</span>
      方便起见只显示已通关（Clear）的成绩记录
    </p>
    <div class="alert alert-error mb-4">
      <p class="mb-1 font-semibold text-red-200">重要提示</p>
      <p class="mb-2">
        在使用本功能前，请务必妥善保存原有数据副本。请勿直接使用从
        RinNet
        服务器下载的唯一存档进行拖拽到输入框进行修改操作。建议使用电脑端进行操作以确保数据安全。另外在服务器下载的存档会包含你的卡号、机台号等隐私信息，请谨慎处理！本工具不提供存档恢复服务，亦不保证功能完全无误，使用本功能所产生的一切后果由用户自行承担。
      </p>
    </div>
    <div class="alert alert-error">
      <p class="mb-2">
        我们不限制玩家下载/上传/修改自己的游戏档案，随意刷取所需道具，但手动修改游戏档案造成数据损坏时项目组概不负责，在修改时务必备份原档。另外，影响排行榜的行为可能会受到封禁，如果你使用作弊行为取得异常的得分，扰乱排行榜或在社交媒体展示作弊成绩，经核实将会封禁排行榜或禁止登录。——RinNet公告
      </p>
      <p class="text-sm text-gray-300">
        导出玩家存档地址：
        <a
          href="https://portal.naominet.live/chuni/v2/setting"
          target="_blank"
          class="text-indigo-400 underline"
        >https://portal.naominet.live/chuni/v2/setting</a>
        <br />
        导入玩家存档地址：
        <a
          href="https://portal.naominet.live/import"
          target="_blank"
          class="text-indigo-400 underline"
        >https://portal.naominet.live/import</a>
      </p>
    </div>
    <div id="edit-alert-container"></div>
    <div id="edit-drop-zone" class="file-input-wrapper mb-6">
      <input
        type="file"
        id="edit-json-file"
        accept=".json"
        class="hidden"
      />
      <label for="edit-json-file" class="file-input-label">
        <span id="edit-file-name"
          >点击选择或拖拽 JSON 文件到此处</span
        >
      </label>
    </div>

    <div id="edit-form" class="hidden space-y-6">
      <div>
        <label class="block text-sm font-medium text-gray-300 mb-2"
          >歌曲 ID</label
        >
        <input
          type="number"
          id="song-id"
          class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-indigo-500"
          placeholder="输入歌曲 ID"
        />
      </div>

      <div id="record-select" class="hidden">
        <label class="block text-sm font-medium text-gray-300 mb-2"
          >选择记录</label
        >
        <select
          id="record-list"
          class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-indigo-500"
        ></select>
      </div>

      <div id="edit-details" class="hidden">
        <div class="grid grid-cols-2 gap-6">
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-white">原始成绩</h3>
            <div id="original-score" class="text-gray-300"></div>
          </div>
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-white">
              修改后成绩
            </h3>
            <div class="space-y-3">
              <div>
                <label
                  class="block text-sm font-medium text-gray-300 mb-1"
                  >CRITICAL</label
                >
                <input
                  type="number"
                  id="edit-critical"
                  class="score-input"
                  disabled
                />
              </div>
              <div class="mb-3">
                <label class="flex items-center">
                  <input
                    type="checkbox"
                    id="edit-auto-maintain"
                    class="form-checkbox text-indigo-500"
                    checked
                  />
                  <span class="ml-2 text-sm text-gray-300"
                    >禁用输入，自动计算CRITICAL数量</span
                  >
                </label>
              </div>
              <div>
                <label
                  class="block text-sm font-medium text-gray-300 mb-1"
                  >JUSTICE</label
                >
                <input
                  type="number"
                  id="edit-justice"
                  class="score-input"
                />
              </div>
              <div>
                <label
                  class="block text-sm font-medium text-gray-300 mb-1"
                  >ATTACK</label
                >
                <input
                  type="number"
                  id="edit-attack"
                  class="score-input"
                />
              </div>
              <div>
                <label
                  class="block text-sm font-medium text-gray-300 mb-1"
                  >MISS</label
                >
                <input
                  type="number"
                  id="edit-guilty"
                  class="score-input"
                />
              </div>
              <div class="pt-2">
                <p class="text-sm text-gray-400">
                  总分：<span id="calculated-score">0</span>
                </p>
                <p class="text-sm text-gray-400">
                  Rank：<span id="calculated-rank">-</span>
                </p>
                <p class="text-sm text-gray-400 mt-2">
                  状态：<span id="calculated-status">-</span>
                </p>
              </div>
              <div>
                <label
                  class="block text-sm font-medium text-gray-300 mb-1"
                  >Full Chain</label
                >
                <select id="edit-fullChainKind" class="score-input">
                  <option value="0">无</option>
                  <option value="1">Full Chain</option>
                  <option value="2">Full Chain x2</option>
                  <option value="3">Full Chain x3</option>
                  <option value="4">Full Chain x4</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-8 text-center">
      <button
        id="download-modified-btn"
        class="btn btn-lg w-full md:w-auto"
        disabled
      >
        下载修改后的存档
      </button>
    </div>
  </div>
</div>
